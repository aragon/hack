<!DOCTYPE html>
      <script type="text/javascript">
        var _paq = _paq || [];
        /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
          var u="https://arastats.eu/staats/";
          _paq.push(['setTrackerUrl', u+'piwik.php']);
          _paq.push(['setSiteId', '7']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
      </script>
      <noscript><img src="https://arastats.eu/staats/piwik.php?idsite=7&amp;rec=1" style="border:0" alt="" /></noscript>
      <html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Aragon Package Manager · Aragon Developer Portal</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Aragon Package Manager · Aragon Developer Portal"/><meta property="og:type" content="website"/><meta property="og:url" content="https://hack.aragon.org/index.html"/><meta property="og:description" content="![](/docs/assets/brand/aragonpm.png)"/><meta property="og:image" content="https://hack.aragon.org/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://hack.aragon.org/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"/><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible doc separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/isotype.svg" alt="Aragon Developer Portal"/><h2 class="headerTitleWithLogo">Aragon Developer Portal</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/getting-started.html" target="_self">Get started</a></li><li class=""><a href="/docs/tutorial.html" target="_self">Tutorial</a></li><li class="siteNavGroupActive"><a href="/docs/aragonos-intro.html" target="_self">aragonOS</a></li><li class="siteNavGroupActive"><a href="/docs/aragonjs-ref.html" target="_self">aragon.js</a></li><li class="siteNavGroupActive"><a href="/docs/aragonui-intro.html" target="_self">Aragon UI</a></li><li class=""><a href="/en/help.html" target="_self">Help</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Aragon Package Manager</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>The basics</h3><ul><li class="navListItem"><a class="navItem" href="/docs/getting-started.html">Getting started</a></li><li class="navListItem"><a class="navItem" href="/docs/glossary.html">Glossary</a></li><li class="navListItem"><a class="navItem" href="/docs/stack.html">The stack</a></li><li class="navListItem"><a class="navItem" href="/docs/acl-intro.html">Permissions</a></li><li class="navListItem"><a class="navItem" href="/docs/forwarding-intro.html">Forwarding</a></li><li class="navListItem"><a class="navItem" href="/docs/upgradeability-intro.html">Upgradeability</a></li><li class="navListItem"><a class="navItem" href="/docs/package-management.html">Package management</a></li><li class="navListItem"><a class="navItem" href="/docs/kits-intro.html">Kits</a></li><li class="navListItem"><a class="navItem" href="/docs/client.html">The Aragon client</a></li><li class="navListItem"><a class="navItem" href="/docs/human-readable-txs.html">Human readable transactions</a></li></ul></div><div class="navGroup navGroupActive"><h3>Aragon CLI</h3><ul><li class="navListItem"><a class="navItem" href="/docs/cli-usage.html">Usage</a></li></ul></div><div class="navGroup navGroupActive"><h3>Aragon Package Manager</h3><ul><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/docs/apm.html">Architecture</a></li></ul></div><div class="navGroup navGroupActive"><h3>aragonOS</h3><ul><li class="navListItem"><a class="navItem" href="/docs/aragonos-intro.html">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/aragonos-building.html">Developing with aragonOS</a></li><li class="navListItem"><a class="navItem" href="/docs/aragonos-ref.html">Reference documentation</a></li></ul></div><div class="navGroup navGroupActive"><h3>aragon.js</h3><ul><li class="navListItem"><a class="navItem" href="/docs/aragonjs-ref.html">Reference documentation</a></li><li class="navListItem"><a class="navItem" href="/docs/aragonjs-ref-clients.html">Reference documentation for clients/wrappers</a></li></ul></div><div class="navGroup navGroupActive"><h3>Aragon UI</h3><ul><li class="navListItem"><a class="navItem" href="/docs/aragonui-intro.html">Introduction</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/aragon/hack/tree/master/docs/apm.md" target="_blank" rel="noreferrer noopener">Edit</a></header><article><div><span><p><img src="/docs/assets/brand/aragonpm.png" alt=""></p>
<p><strong>Upgradeability</strong> is one of the key features of <a href="/docs/aragonos-intro.html">aragonOS</a>.</p>
<p>We decided to build APM as the main way to <strong>distribute different versions of the packages</strong> that comprise Aragon Core. A package or <strong>repository</strong> (repo) in the APM keeps track of evolving versions of its contents (the webapp component typically) and smart contract code (if applicable).</p>
<h2><a class="anchor" aria-hidden="true" id="architecture-registries-repos-and-versions"></a><a href="#architecture-registries-repos-and-versions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Architecture: Registries, repos and versions</h2>
<p>Each APM Registry is a smart contract that owns an <a href="https://ens.domains/">Ethereum Name Service</a> (ENS) domain and therefore can create subdomains for its repos. This gives users the ability to <strong>find repos with human-readable names</strong>.</p>
<p>We envision that many APM registries will be created for different purposes and types of packages. For Aragon, we use the <code>aragonpm.eth</code> registry to host our core components. We also have the <code>open.aragonpm.eth</code> registry for community developed packages, where anyone can create repos.</p>
<p>At the repo level, each repo can have <strong>its own rules</strong> that govern <strong>how new versions can be published</strong> using the aragonOS <a href="/docs/acl-intro.html">Access Control List</a>. This allows for setting up different types of processes depending the importance of the repo or the nature of the upgrade (major, minor or patch).</p>
<p><img src="https://blog.aragon.org/content/images/2018/08/0_THgdT5gn4P-WjT3d.png" alt=""></p>
<blockquote>
<p><strong>Caption</strong><br>
A Repo is created in a Registry and can have many versions published over time</p>
</blockquote>
<p>A repo keeps versioned history of content and smart contract code tuples. The content is an on-chain reference to a blob of data that lives off-chain (we support IPFS or HTTP addressing currently). By using IPFS we have the assurance of the <strong>integrity</strong> of the data and that it hasn't changed since it was published. Aragon always uses IPFS for publishing, but having HTTP is useful for testing purposes or for less critical code.</p>
<p>The smart contract code only applies to packages that have an on-chain contract component associated with a particular version. It can be the <strong>implementation code for <a href="/docs/upgradeability-intro.html">upgradeable Proxies</a></strong> or a smart contract that can be directly used. By having these code addresses stored on-chain, smart contracts can use APM directly to get the latest version of the code for a repo.</p>
<p>APM gives users <strong>complete transparency</strong> over all deployments and <strong>traceability</strong> of what process publishing a new version entailed.</p>
<p>Because APM repos are Aragon apps that are part of the APM Registry DAO, repos can use any of the <a href="/docs/aragonos-intro.html">aragonOS</a>-compatible governance apps to govern the process for creating new updates.</p>
<p>It is important to point out that APM acts as the reference to what the last version of a repo is, but <strong>all upgrades are opt-in</strong> and DAOs through their governance mechanisms need to decide to upgrade, or keep using an old version.</p>
<p>Automatically upgrading all of Aragon's DAOs is extremely dangerous regardless of what the governance mechanism over upgrades is. That's why by default all upgrades must be started within the DAO, however someone could build an auto-update contract that makes the DAO and its apps up to date to the latest version in APM.</p>
<h2><a class="anchor" aria-hidden="true" id="interacting-with-apm-apmjs-and-aragon-cli"></a><a href="#interacting-with-apm-apmjs-and-aragon-cli" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interacting with APM: apm.js and Aragon CLI</h2>
<p>In order to interact with APM registries we have built <a href="https://github.com/aragon/apm.js">apm.js</a>, a standalone JS library to inspect APM repos, get their different versions and fetch the referenced content. The library also allows interaction with the APM contracts in order to create repos or new versions in repos.</p>
<p>The <a href="/docs/cli-usage.html">Aragon CLI</a> also uses apm.js to provide a great developer experience to publishing new versions to APM repos. The CLI APM commands, accessible doing <code>aragon apm</code>, are the easiest way to manage APM repos.</p>
<p><img src="https://blog.aragon.org/content/images/2018/08/0_h6eCFJahFwtwL3GN.png" alt=""></p>
<blockquote>
<p><strong>Caption</strong><br>
Using the Aragon CLI to publish a version to an APM repo and inspecting it</p>
</blockquote>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="cli-usage.html">← Using the Aragon CLI</a><a class="docs-next button" href="aragonos-intro.html">aragonOS intro →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#architecture-registries-repos-and-versions">Architecture: Registries, repos and versions</a></li><li><a href="#interacting-with-apm-apmjs-and-aragon-cli">Interacting with APM: apm.js and Aragon CLI</a></li></ul></nav></div><footer class="nav-footer sc-bdVaJa bXwoTT" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/isotype.svg" alt="Aragon Developer Portal" width="66" height="58"/></a><div><h5>Documentation</h5><a href="/docs/getting-started.html">Get started</a><a href="/docs/tutorial.html">Tutorial</a><a href="/docs/aragonos-intro.html">aragonOS</a><a href="/docs/aragonjs-ref.html">aragon.js</a><a href="/docs/aragonui-intro.html">Aragon UI</a></div><div><h5>Community</h5><a href="http://wiki.aragon.org/projects/" target="_blank">User showcase</a><a href="https://aragon.chat" target="_blank">Community chat</a><a href="https://twitter.com/AragonProject" target="_blank" rel="noreferrer noopener">Twitter</a></div><div><h5>More</h5><a href="https://blog.aragon.org">Blog</a><a href="https://github.com/aragon">GitHub</a><a href="https://wiki.aragon.org/documentation/legal/Privacy_policy/">Privacy policy</a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: '9dff0383c32107d6c174f15e259bb23a',
                indexName: 'aragon',
                inputSelector: '#search_input_react',
                algoliaOptions: {}
              });
            </script>
      <style data-styled-components="bXwoTT">
/* sc-component-id: sc-bdVaJa */
.sc-bdVaJa {} .bXwoTT{background:#6D8088 !important;}
/* sc-component-id: sc-global-3832733198 */
@font-face{font-family:'overpass';src:url(/aragon-ui/cf790334a5a6d45c.woff2) format('woff2'),url(/aragon-ui/fd48a701d84ebf69.woff) format('woff');font-weight:400;font-style:normal;} @font-face{font-family:'overpass';src:url(/aragon-ui/32a3f11e7740ce58.woff2) format('woff2'),url(/aragon-ui/860b19d3e10736e7.woff) format('woff');font-weight:600;font-style:normal;} @font-face{font-family:'overpass';src:url(/aragon-ui/5cfe62515c2f9b42.woff2) format('woff2'),url(/aragon-ui/f8ba2d7a9af0db1f.woff) format('woff');font-weight:800;font-style:normal;} *,*:before,*:after{box-sizing:border-box;} html{min-height:100%;} body{font-family:overpass,sans-serif;font-size:15px;font-weight:400;line-height:1.5;color:#000000;background:#F7FBFD;} body,ul,p,h1,h2,h3,h4,h5,h6{margin:0;padding:0;} button,select,input,textarea,h1,h2,h3,h4,h5,h6{font-size:inherit;font-family:inherit;font-weight:inherit;line-height:inherit;} a,button,select,input,textarea{color:inherit;} strong,b{font-weight:600;}</style>
      </body></html>